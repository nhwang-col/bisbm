diffs <- list(data$diff_valor_1983, data$diff_valor_2006, data$diff_valor_2011)
for(diff in diffs){
ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", diff)) +
labs(x=deparse(substitute(diff)), y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
}
for(diff in diffs){
ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", diff)) +
labs(x=deparse(substitute(diff)), y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
}
for(diff in diffs){
ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", diff)) +
labs(x=deparse(substitute(diff)), y="count1(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
}
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", diff)) +
labs(x=deparse(substitute(diff)), y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
print(plt)
}
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", deparse(substitute(diff))) +
labs(x=deparse(substitute(diff)), y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
print(plt)
}
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", deparse(substitute(diff))) +
labs(x=deparse(substitute(diff)), y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
print(plt)
}
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", deparse(substitute(diff)))) +
labs(x=deparse(substitute(diff)), y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
print(plt)
}
diffs <- list(data$diff_valor_1983, data$diff_valor_2006, data$diff_valor_2011)
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", deparse(substitute(diff)))) +
labs(x=deparse(substitute(diff)), y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
print(plt)
}
number_ticks <- function(n) {function(limits) pretty(limits, n)}
objname <- function(obj) {
deparse(substitute(obj))
}
diffs <- list(data$diff_valor_1983, data$diff_valor_2006, data$diff_valor_2011)
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", objname(diff))) +
labs(x=objname(diff), y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
print(plt)
}
objname(diff)
diff
diffs[1]
years = list(1983, 2006, 2011)
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diffs[1]))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", objname(years[1]))) +
labs(x=objname(years[1]), y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
print(plt)
i = i + 1
}
years = list(1983, 2006, 2011)
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", objname(years[1]))) +
labs(x=objname(years[1]), y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
print(plt)
i = i + 1
}
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", years[1])) +
labs(x=years[1], y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
print(plt)
i = i + 1
}
years = list(1983, 2006, 2011)
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", years[i])) +
labs(x=years[i], y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(20))
print(plt)
i = i + 1
}
years = list(1983, 2006, 2011)
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", years[i])) +
labs(x=years[i], y="count(Sectors)") +
scale_x_continuous(limits=c(min(abs(diff)), max(abs(diff))), breaks=number_ticks(20))
print(plt)
i = i + 1
}
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", years[i])) +
labs(x=years[i], y="count(Sectors)") +
scale_x_continuous(limits=c(min(abs(diff)), max(abs(diff))))
print(plt)
i = i + 1
}
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", years[i])) +
labs(x=years[i], y="count(Sectors)") +
scale_x_continuous(limits=c(min(abs(diff)), max(abs(diff))), breaks=number_ticks(20))
print(plt)
i = i + 1
}
diffs <- list(data$diff_valor_1983, data$diff_valor_2006, data$diff_valor_2011)
years = list(1983, 2006, 2011)
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", years[i])) +
labs(x=years[i], y="count(Sectors)") +
scale_x_continuous(limits=c(min(abs(diff)), max(abs(diff))), breaks=number_ticks(10))
print(plt)
i = i + 1
}
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", years[i])) +
labs(x=years[i], y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for ", years[i])) +
theme(plot.title = element_text(hjust = 0.5))+
labs(x=years[i], y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for Valor Difference in", years[i])) +
theme(plot.title = element_text(hjust = 0.5))+
labs(x=years[i], y="count(Sectors)") +
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for Valor Difference in", years[i]),x=years[i], y="count(Sectors)") +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for Valor Difference in", years[i]),
x=paste("abs(diff_valor_",years[i], sep=""), y="count(Sectors)") +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i = 1
for(diff in diffs){
plt <- ggplot(data=data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for Valor Difference in", years[i]),
x=paste("abs(diff_valor_",years[i],")", sep=""), y="count(Sectors)") +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i = 1
for(diff in diffs){
plt <- ggplot(data, aes(abs(diff))) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for Valor Difference in", years[i]),
x=paste("abs(diff_valor_",years[i],")", sep=""), y="count(sectors)") +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
ca=list(1,2,3)
ca
ca[2:3]
diffs <- list(abs(data$diff_valor_1983), abs(data$diff_valor_2006), abs(data$diff_valor_2011))
years = list(1983, 2006, 2011)
i = 1
for(diff in diffs){
plt <- ggplot(data, aes(diff)) +
geom_histogram(binwidth = .05) +
labs(title=paste("Histogram for Valor Difference in", years[i]),
x=paste("abs(diff_valor_",years[i],")", sep=""), y="count(sectors)") +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data, aes(diffs[1], diff)) +
geom_point() +
labs(title=paste("abs(diff_valor_",years[1],")", "abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[i],")", sep=""), y="count(sectors)") +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data, aes(x=diffs[1], y=diff)) +
geom_point() +
labs(title=paste("abs(diff_valor_",years[1],")", "abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[i],")", sep=""), y="count(sectors)") +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data, aes(x=diffs[1], y=diff)) +
geom_point(aes(x=diffs[1], y=diff)) +
labs(title=paste("abs(diff_valor_",years[1],")", "abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[i],")", sep=""), y="count(sectors)") +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data) +
geom_point(aes(x=diffs[1], y=diff)) +
labs(title=paste("abs(diff_valor_",years[1],")", "abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[i],")", sep=""), y="count(sectors)") +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data=data) +
geom_point(aes(x=diffs[1], y=diff)) +
labs(title=paste("abs(diff_valor_",years[1],")", "abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[i],")", sep=""), y="count(sectors)") +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data, aes(x=unlist(diffs[1]), y=diff)) +
geom_point() +
labs(title=paste("abs(diff_valor_",years[1],")", "abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[i],")", sep=""), y="count(sectors)") +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data, aes(x=unlist(diffs[1]), y=diff)) +
geom_point() +
labs(title=paste("abs(diff_valor_",years[1],")", " vs abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[1],")", sep=""),
y=paste("abs(diff_valor_",years[1],")", sep="")) +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data, aes(x=unlist(diffs[1]), y=diff)) +
geom_point() +
labs(title=paste("abs(diff_valor_",years[1],")", " vs abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[1],")", sep=""),
y=paste("abs(diff_valor_",years[i],")", sep="")) +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10))
print(plt)
i = i + 1
}
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data, aes(x=unlist(diffs[1]), y=diff)) +
geom_point() +
labs(title=paste("abs(diff_valor_",years[1],")", " vs abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[1],")", sep=""),
y=paste("abs(diff_valor_",years[i],")", sep="")) +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10)) +
geom_abline()
print(plt)
i = i + 1
}
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data, aes(x=unlist(diffs[1]), y=diff)) +
geom_point() +
labs(title=paste("abs(diff_valor_",years[1],")", " vs abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[1],")", sep=""),
y=paste("abs(diff_valor_",years[i],")", sep="")) +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10)) +
scale_y_continuous(breaks=number_ticks(10)) +
geom_abline()
print(plt)
i = i + 1
}
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data, aes(x=unlist(diffs[1]), y=diff)) +
geom_point() +
labs(title=paste("abs(diff_valor_",years[1],")", " vs abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[1],")", sep=""),
y=paste("abs(diff_valor_",years[i],")", sep="")) +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10)) +
scale_y_continuous(breaks=number_ticks(10)) +
geom_abline() + geomdl(aes(label="y=x"))
print(plt)
i = i + 1
}
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data, aes(x=unlist(diffs[1]), y=diff)) +
geom_point() +
labs(title=paste("abs(diff_valor_",years[1],")", " vs abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[1],")", sep=""),
y=paste("abs(diff_valor_",years[i],")", sep="")) +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10)) +
scale_y_continuous(breaks=number_ticks(10)) +
geom_abline() + geom_dl(aes(label="y=x"))
print(plt)
i = i + 1
}
install.packages("grid")
install.packages("grid")
library(grid)
i=2
for(diff in diffs[2:3]){
plt <- ggplot(data, aes(x=unlist(diffs[1]), y=diff)) +
geom_point() +
labs(title=paste("abs(diff_valor_",years[1],")", " vs abs(diff_valor_",years[i],")", sep=""),
x=paste("abs(diff_valor_",years[1],")", sep=""),
y=paste("abs(diff_valor_",years[i],")", sep="")) +
theme(plot.title = element_text(hjust = 0.5))+
scale_x_continuous(breaks=number_ticks(10)) +
scale_y_continuous(breaks=number_ticks(10)) +
geom_abline() + geom_dl(aes(label="y=x"))
print(plt)
i = i + 1
}
summary(data$diff_valor_2006)
hist(data$diff_valor_2006)
hist(abs(data$diff_valor_2006))
hist(abs(data$diff_valor_1983))
hist(abs(data$diff_valor_2011))
install.packages("Rcpp")
system("export PKG_CXXFLAGS=`Rscript -e \"Rcpp:::CxxFlags()\"` && R CMD SHLIB biSBM_R.cpp", intern=T);
system("export PKG_CXXFLAGS='Rscript -e \"Rcpp:::CxxFlags()\"' && R CMD SHLIB biSBM_R.cpp", intern=T);
setwd("C:/Users/neil.hwang/Downloads/biSBM_v1.2")
install.packages("Rtools")
library(Rtools)
library(rtools)
system("export PKG_CXXFLAGS='Rscript -e \"Rcpp:::CxxFlags()\"`` && R CMD SHLIB biSBM_R.cpp", intern=T);
system("PKG_CXXFLAGS='Rscript -e \"Rcpp:::CxxFlags()\"`` && R CMD SHLIB biSBM_R.cpp", intern=T);
system("export PKG_CXXFLAGS=`Rscript -e \"Rcpp:::CxxFlags()\"` && R CMD SHLIB biSBM_R.cpp", intern=T);
system("export PKG_CXXFLAGS=`Rscript -e \"Rcpp:::CxxFlags()\"` && R CMD SHLIB biSBM_R.cpp", intern=T);
Sys.setenv(PKG_CXXFLAGS=`Rscript -e \"Rcpp:::CxxFlags()\"`)
Sys.setenv(PKG_CXXFLAGS=`Rscript -e \"Rcpp:::RcppCxxFlags()\"`)
Sys.setenv("PKG_CXXFLAGS"= Rcpp:::RcppCxxFlags())
Sys.setenv( "PKG_CXXFLAGS"= `Rscript -e "Rcpp:::SHLIB('biSBM_R.cpp')"`)
Sys.setenv( "PKG_CXXFLAGS"= Rcpp:::SHLIB('biSBM_R.cpp'))
Sys.setenv( "PKG_CXXFLAGS"= `Rscript -e "Rcpp:::SHLIB('biSBM_R.cpp')"``)
Sys.setenv( "PKG_CXXFLAGS"= `Rscript -e "Rcpp:::SHLIB('biSBM_R.cpp')"`)
Sys.setenv( "PKG_CXXFLAGS"= `Rscript -e "Rcpp:::SHLIB('biSBM_R.cpp')"`)
Sys.setenv( R CMD SHLIB biSBM_R.cpp )
Sys.setenv("PKG_CXXFLAGS"= Rcpp:::RcppCxxFlags() && && R CMD SHLIB biSBM_R.cpp)
devtools:::R( "CMD SHLIB biSBM_R.cpp", getwd() )
setwd("C:/Users/neil.hwang/Downloads/biSBM_v1.2")
devtools:::R( "CMD SHLIB biSBM_R.cpp", getwd() )
devtools:::R( "CMD SHLIB biSBM_R.cpp")
devtools:::R( "R CMD SHLIB biSBM_R.cpp")
devtools:::R( "CMD SHLIB biSBM_R.cpp")
CMD SHLIB biSBM_R.cpp
CMD SHLIB "biSBM_R.cpp"
R CMD SHLIB "biSBM_R.cpp"
find_rtools()
devtools::build_github_devtools()
install_github("hadley/devtools")
devtools::install_github("hadley/devtools")
library(devtools)
find_rtools()
has_devel()
install_github("hadley/devtools")
devtools::build_github_devtools()
devtools::find_rtools()
devtools::has_devel()
Sys.getenv("PATH")
source('C:/Users/neil.hwang/Downloads/biSBM_v1.2/biSBM.R', echo=TRUE)
biSBM <- function(data, nodeType, ka, kb, deg.corr=1, iter=10){
### checking ka, kb, deg.corr and iter are positive
if(any(c(ka<0, kb<0, deg.corr<0, iter<0))) stop("ka, kb, deg.corr and iter must be positive");
### deg.corr can be just 0 or 1
if(deg.corr>1 || deg.corr<0) stop("Use deg.corr=1 for the degree corrected SBM and 0 otherwise");
### loading the shared library
dyn.load("biSBM_R.so");
if(!is.loaded("rFunction")) stop("Something is wrong with the C++ shared library");
### if the adjacency matrix is supplied, transform it in edgelist
###
if(typeof(data)=="list") data <- vapply(data, as.double, numeric(nrow(data)));
if(ncol(data)>2){
nn <- ncol(data); ##total nodes
data[lower.tri(data)] <- 0;
nodesA <- which(rowSums(data)==0)[1] - 1;
el1 <- rep(1:nodesA, rowSums(data[1:nodesA, ]));
el2 <- unlist(apply(data[1:nodesA,], 1, function(x) which(x!=0)));
data <- cbind(el1, el2);
}
if(min(data)==0){
warning("Network indexing starts from 0", call.=F, immediate.=T);
network <- network + 1;
}
## checking dimensions and type for nodeType
if(typeof(nodeType)=="list") nodeType <- vapply(nodeType, as.double, numeric(nrow(nodeType)));
if(is.atomic(nodeType)) dim(nodeType) <- c(length(nodeType), 1);
if((sum(dim(nodeType)) - abs(diff(dim(nodeType))))!=2) stop("nodeType is not a column or row vector");
if(!is.double(nodeType)) nodeType <- as.double(nodeType);
if(length(nodeType)!= length(unique(as.numeric(data)))) stop("The number of network's nodes and node types are different. Please,
check the connected components in your network");
### calling C++ algorithm and returning the partition
res <-integer(length(nodeType));
.C("rFunction", as.numeric(data), nrow(data), nodeType, length(nodeType), as.integer(ka),
as.integer(kb), as.integer(deg.corr), as.integer(iter), res=res)$res + 1;
}
source("biSBM.R"); ### loading and compiling biSBM function
edges <- read.table("southernWomen.edgelist");  ## edgelist
types <- read.table("southernWomen.types");     ## nodeType
g <- biSBM(data = edges, nodeType = types, ka = 2, kb = 3, deg.corr = 1, iter = 3);
system("R CMD SHLIB biSBM_R.cpp", intern=T)
system("R CMD SHLIB biSBM_R.cpp")
source("biSBM.R"); ### loading and compiling biSBM function
g <- biSBM(data = edges, nodeType = types, ka = 2, kb = 3, deg.corr = 1, iter = 3);
dynload("biSBM_R.cpp")
dyn.load("biSBM_R.cpp")
dyn.load("biSBM_R.so")
system("R CMD SHLIB biSBM_R.cpp")
